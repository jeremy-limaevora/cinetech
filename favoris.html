<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="favors.css">
    <title>Séries favorites</title>
</head>
<body>
    <header>
        <h2>Cinetech</h2>
    
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Rechercher un film...">
    
        </div>
        <button id="connexionBtn" data-popup="connexionPopup">Connexion</button>
        <div id="connexionPopup" class="popup">
            <div class="popup-content">
                <span class="close" data-close="connexionPopup">&times;</span>
            </div>
        </div>
        
        <button id="inscriptionBtn" data-popup="inscriptionPopup">Inscription</button>
        <div id="inscriptionPopup" class="popup">
            <div class="popup-content">
                <span class="close" data-close="inscriptionPopup">&times;</span>
            </div>
        </div>
    
    
    </header>
    <h1>Séries favorites</h1>
    <ul id="favorisList"></ul>

    <script>
        // Fonction pour récupérer les séries favorites depuis localStorage
        function getFavoris() {
            const favoris = localStorage.getItem('favoris');
            return favoris ? JSON.parse(favoris) : [];
        }

        // Fonction pour afficher les séries favorites dans la liste
        function afficherFavoris() {
            const favoris = getFavoris();
            const favorisList = document.getElementById('favorisList');

            // Effacer le contenu précédent de la liste
            favorisList.innerHTML = '';

            // Ajouter chaque série favorite à la liste
            favoris.forEach(serie => {
                const listItem = document.createElement('li');
                listItem.classList.add('serie'); // Ajouter une classe pour le style

                // Créer un élément img pour l'image de la série
                const img = document.createElement('img');
                img.src = serie.image; // Utiliser l'image stockée dans les favoris
                img.alt = serie.title;

                // Créer un élément span pour le titre et y insérer le titre de la série
                const titleSpan = document.createElement('span');
                titleSpan.textContent = serie.title; // Utiliser le titre stocké dans les favoris

                // Créer un bouton pour retirer la série des favoris
                const removeBtn = document.createElement('button');
                removeBtn.textContent = 'Retirer des favoris';
                removeBtn.addEventListener('click', () => retirerDesFavoris(serie.id)); // Appeler la fonction pour retirer la série des favoris

                // Ajouter l'image, le titre et le bouton "Retirer des favoris" à l'élément li
                listItem.appendChild(img);
                listItem.appendChild(titleSpan);
                listItem.appendChild(removeBtn);

                favorisList.appendChild(listItem);
            });
        }

        // Fonction pour retirer une série des favoris
        function retirerDesFavoris(serieId) {
            let favoris = localStorage.getItem('favoris');
            favoris = favoris ? JSON.parse(favoris) : [];
            const updatedFavoris = favoris.filter(fav => fav.id !== serieId);
            localStorage.setItem('favoris', JSON.stringify(updatedFavoris));
            afficherFavoris(); // Actualiser la liste des séries favorites après la suppression
            alert('Série retirée des favoris !');
        }

        // Appel de la fonction pour afficher les séries favorites au chargement de la page
        window.addEventListener('load', afficherFavoris);
    </script>
</body>
</html>
